{"Invoice":{"action":"edgemart","parameters":{"name":"Invoice","alias":"QAD_INVOICE_DATA_DATASET"}},"ComputeDimension":{"action":"computeExpression","parameters":{"name":"ComputeDimension","source":"CustomerChannel_Stock","mergeWithSource":true,"computedFields":[{"default":"","name":"Product","saqlExpression":"case when ProductGroupNew==\"A2 INFANT POWDER\" || ProductGroupNew==\"A2 INFANT FORMULA\" then \"A2 INFANT FORMULA\" when ProductGroupNew==\"A2 WHOLE MILK POWDER\" || ProductGroupNew==\"A2 MILK POWDER\" then \"A2 WHOLE MILK POWDER\" else ProductGroupNew end","label":"Product","type":"Text"},{"default":"","name":"CustomerT","saqlExpression":"case when (len('CCH.Customer_Type') == 0 || 'CCH.Customer_Type'==\"-\") then \"Others\" else 'CCH.Customer_Type' end","label":"CustomerT","type":"Text"},{"default":"","name":"Product1","saqlExpression":"case when ProductNew==\"A2 INFANT PWDR STGE1 ANZ\" || ProductNew==\"A2 INFANT FORMULA STAGE1\" then \"A2 INFANT PWDR STGE1 ANZ\" when ProductNew==\"A2 INFANT PWDR STGE2 ANZ\" || ProductNew==\"A2 INFANT FORMULA STAGE2\" then \"A2 INFANT PWDR STGE2 ANZ\"  when ProductNew==\"A2 INFANT PWDR STGE3 ANZ\" || ProductNew==\"A2 INFANT FORMULA STAGE3\" then \"A2 INFANT PWDR STGE3 ANZ\"  when ProductNew== \"A2 2 LITRE FULL CREAM\" || ProductNew==\"A2 2 LITRE WHOLEMILK\" then \"A2 2 LITRE FULL CREAM\" when ProductNew==\"1 KG WHOLE MILK POWDER\" || ProductNew==\"A2 WHOLE MILK POWDER\" then \"1 KG WHOLE MILK POWDER\" else ProductNew end","label":"Product1","type":"Text"},{"default":"","name":"Customer_Group","saqlExpression":"upper('CCH.Customer_Group')","label":"Customer_Group","type":"Text"},{"default":"","name":"Confirmed_New","saqlExpression":"upper(Confirmed)","label":"Confirmed_New","type":"Text"},{"default":"","name":"Domain1","saqlExpression":"upper('CCH.Domain')","label":"Domain1","type":"Text"},{"default":"","name":"Week_New","saqlExpression":"case when ('Date1_Day' >= \"01\" and 'Date1_Day' <= \"07\") then \"01\" when ('Date1_Day' >= \"08\" and 'Date1_Day' <= \"14\") then \"02\" when ('Date1_Day' >= \"15\" and 'Date1_Day' <= \"21\") then \"03\" when ('Date1_Day' >= \"22\" and 'Date1_Day' <= \"28\") then \"04\" else \"05\" end","label":"Week_New","type":"Text"}]}},"Compute_1SO":{"action":"computeExpression","parameters":{"name":"Compute_1SO","source":"SalesOrder","mergeWithSource":true,"computedFields":[{"default":"0","precision":10,"name":"sod_qty_ord1","saqlExpression":"case when 'PT_Size.pt_size'>0 || 'PT_Size.pt_size'<0 then (sod_qty_ord*'PT_Size.pt_size') else sod_qty_ord end","scale":2,"label":"sod_qty_ord1","type":"Numeric"},{"default":"0","precision":10,"name":"sod_qty_ship1","saqlExpression":"case when 'PT_Size.pt_size'>0 || 'PT_Size.pt_size'<0 then (sod_qty_ship*'PT_Size.pt_size') else sod_qty_ship end","scale":2,"label":"sod_qty_ship1","type":"Numeric"},{"default":"","name":"CustCode","saqlExpression":"upper(so_cust)","label":"CustCode","type":"Text"}]}},"CustomerChannelHierarchy":{"action":"edgemart","parameters":{"name":"CustomerChannelHierarchy","alias":"CustomerChannelHierarchy1"}},"Filter_SalesOrder":{"action":"filter","parameters":{"filter":"ad_state:EQ:NSW|QLD|SA|VIC|WA","source":"SalesOrder1"}},"computePtMaster":{"action":"computeExpression","parameters":{"name":"computePtMaster","source":"FilterPTSize","mergeWithSource":true,"computedFields":[{"default":"0","precision":10,"name":"pt_size1","saqlExpression":"case when 'pt_size'>0 || 'pt_size'<0 then 'pt_size' end","scale":2,"label":"pt_size1","type":"Numeric"},{"default":"","name":"pt_um1","saqlExpression":"upper(pt_um)","label":"pt_um1","type":"Text"},{"default":"","name":"pt_domain1","saqlExpression":"upper(pt_domain)","label":"pt_domain1","type":"Text"}]}},"Compute_1Inv":{"action":"computeExpression","parameters":{"name":"Compute_1Inv","source":"Invoice","mergeWithSource":true,"computedFields":[{"default":"","name":"CustCode","saqlExpression":"upper(CUSTOMER)","label":"CustCode","type":"Text"},{"default":"0","precision":10,"name":"CONVERTED_QTY_LTR_KG1","saqlExpression":"case when Converted_KG>0 || Converted_KG<0 then Converted_KG else QTY_INV_LITRES end","scale":2,"label":"CONVERTED_QTY_LTR_KG1","type":"Numeric"}]}},"SalesOrder1":{"action":"edgemart","parameters":{"name":"SalesOrder","alias":"QAD_SalesOrder_NEW"}},"computeSO":{"action":"computeExpression","parameters":{"name":"computeSO","source":"Filter_SalesOrder","mergeWithSource":true,"computedFields":[{"default":"","name":"sod_um1","saqlExpression":"upper(sod_um)","label":"sod_um1","type":"Text"}]}},"CustomerChannel_Stock":{"action":"augment","parameters":{"right_key":["CustomerNew"],"right_select":["Customer_Group","Customer","CustomerNew","Domain","Customer_Type"],"left":"Append1","left_key":["Customer"],"name":"CustomerChannel_Stock","right":"Compute_CustomerHieracrhyCode","relationship":"CCH"}},"PT_Size":{"action":"edgemart","parameters":{"name":"QAD_pt_mstr","alias":"QAD_pt_mstr"}},"Compute2":{"action":"computeExpression","parameters":{"name":"Compute2","source":"Compute_1Inv","mergeWithSource":false,"computedFields":[{"default":"","name":"SalesOrder","saqlExpression":"upper(SALES_ORDER)","label":"SalesOrder","type":"Text"},{"default":"\"0\"","precision":10,"name":"Quantity","saqlExpression":"CONVERTED_QTY_LTR_KG1","scale":2,"label":"Quantity","type":"Numeric"},{"fiscalMonthOffset":6,"default":"","name":"Date1","saqlExpression":"toDate('DUE_DATE',\"yyyy-MM-dd\")","format":"yyyy-MM-dd","label":"Date1","type":"Date"},{"default":"","name":"ProductGroupNew","saqlExpression":"upper(PRODUCT_LINE_NAME)","label":"ProductGroupNew","type":"Text"},{"default":"","name":"ProductNew","saqlExpression":"upper(SKU_NAME)","label":"ProductNew","type":"Text"},{"default":"","name":"Confirmed","saqlExpression":"\"Invoiced\"","label":"Confirmed","type":"Text"},{"default":"","name":"Customer","saqlExpression":"upper(CUSTOMER)","label":"Customer","type":"Text"}]}},"Compute1":{"action":"computeExpression","parameters":{"name":"Compute1","source":"Invoice_SalesOrder","mergeWithSource":false,"computedFields":[{"default":"","name":"SalesOrder","saqlExpression":"upper(sod_nbr)","label":"SalesOrder","type":"Text"},{"default":"0","precision":10,"name":"Quantity","saqlExpression":"(sod_qty_ord1-sod_qty_ship1)","scale":2,"label":"Quantity","type":"Numeric"},{"fiscalMonthOffset":6,"default":"","name":"Date1","saqlExpression":"toDate('so_ord_date',\"yyyy-MM-dd\")","format":"yyyy-MM-dd","label":"Date1","type":"Date"},{"default":"","name":"ProductGroupNew","saqlExpression":"upper('Invoice.PRODUCT_LINE_NAME')","label":"ProductGroupNew","type":"Text"},{"default":"","name":"ProductNew","saqlExpression":"upper('Invoice.SKU_NAME')","label":"ProductNew","type":"Text"},{"default":"","name":"Confirmed","saqlExpression":"case when sod_confirm==1 then \"Open-Confirmed-Yes\" else \"Open-Confirmed-No\" end","label":"Confirmed","type":"Text"},{"default":"","name":"Customer","saqlExpression":"upper('so_cust')","label":"Customer","type":"Text"}]}},"StockAllocationCustomerType":{"action":"sfdcRegister","parameters":{"name":"StockAllocationCustomerType","alias":"StockAllocationCustomerType","source":"ComputeDimension"}},"Append1":{"action":"append","parameters":{"sources":["Compute1","Compute2"],"name":"Append1"}},"FilterPTSize":{"action":"filter","parameters":{"filter":"pt_domain:EQ:A2DPA","source":"PT_Size"}},"Compute_CustomerHieracrhyCode":{"action":"computeExpression","parameters":{"name":"Compute_CustomerHieracrhyCode","source":"CustomerChannelHierarchy","mergeWithSource":true,"computedFields":[{"default":"","name":"CustomerNew","saqlExpression":"upper(Customer)","label":"CustomerNew","type":"Text"}]}},"SalesOrder":{"action":"augment","parameters":{"right_key":["pt_part","pt_um1"],"right_select":["pt_part","pt_size","pt_um1","pt_size1"],"left":"computeSO","left_key":["sod_part","sod_um1"],"name":"SalesOrderPT","right":"computePtMaster","relationship":"PT_Size"}},"Invoice_SalesOrder":{"action":"augment","parameters":{"right_key":["ITEM_NUMBER"],"right_select":["SKU_NAME","PRODUCT_LINE_NAME"],"left":"Compute_1SO","left_key":["sod_part"],"name":"Invoice_SalesOrder","right":"Compute_1Inv","relationship":"Invoice"}}}